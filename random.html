<!DOCTYPE html>
<html lang="en-US">

<body>
  <main>
    <head> 

 <script>
  var comingFromPost = document.referrer;

  function linkToRandomBlogPost() {
    var allPosts = [];
    {% for post in site.posts %}
    allPosts.push('{{post.url}}');
    {% endfor %}

    var i = 0;
    do {
      var randomPostLink = allPosts[Math.floor(Math.random() * allPosts.length)];
      i++;}
    while (comingFromPost.includes(randomPostLink) || i > 10)

    if (i > 10 && comingFromPost !== '/fieldnotes/1') {
      randomPostLink = '/fieldnotes/1';}

    if (i > 10 && comingFromPost === '/fieldnotes/l') {
      randomPostLink = '/fieldnotes/1'
    }

    return randomPostLink;
  }

  location.replace(linkToRandomBlogPost())

  </script>
  </head>

<noscript>
  <h1>JavaScript is turned off</h1>
  <p>To get to a random post, please turn on javascript</p>
</noscript>

  </main>
</body>
</html>